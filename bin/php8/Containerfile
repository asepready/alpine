# Use the official Alpine Linux image as a base
FROM alpine:3.16

LABEL maintainer="Asep Ready <asepready@gmail.com>" \
  description="PHP-FPM v8 container based on Alpine Linux"

# Install PHP 8.0 and PHP-FPM along with commonly used extensions
RUN apk update && apk add --no-cache \
  php8 \
  php8-fpm \
  php8-mysqli \
  php8-pdo_mysql \
  php8-json \
  php8-curl \
  php8-mbstring \
  php8-xml \
  php8-gd \
  php8-zip \
  php8-opcache \
  php8-intl \
  php8-soap \
  php8-bcmath \
  php8-redis \
  && rm -rf /var/cache/apk/*

# Configure PHP-FPM to listen on port 9000
COPY php-fpm.d/www.conf /etc/php8/php-fpm.d/www.conf

# Expose port 9000
EXPOSE 9000

# Start PHP-FPM
CMD ["php-fpm8", "-F"]
